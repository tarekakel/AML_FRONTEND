<!-- customer-register.component.html -->
<div class="flex flex-col w-full h-[80vh] bg-gray-50">

  <!-- 1. Slim Stepper Header (sticky) -->
  <header class="sticky top-0 z-20 bg-gray-50">
    <div class="px-4 py-6">

      <!-- Wrap icons + line in one relative container -->
      <div class="relative">
        <!-- Icons row -->
        <div class="grid grid-flow-col auto-cols-fr relative z-10">
          <ng-container *ngFor="let step of steps">
            <div class="flex justify-center">
              <div
                class="flex items-center justify-center w-10 h-10 rounded-full border-2 transition"
                [ngClass]="{
                  'bg-green-500 border-green-500': step < currentStep,
                  'bg-blue-100 border-blue-600 animate-pulse': step === currentStep,
                  'bg-white border-gray-300': step > currentStep
                }"
              >
                <!-- Completed checkmark -->
                <ng-container *ngIf="step < currentStep">
                  <svg
                    class="w-5 h-5 text-white"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="3"
                      d="M5 13l4 4L19 7"
                    />
                  </svg>
                </ng-container>

                <!-- Active / upcoming icon -->
                <ng-container *ngIf="step >= currentStep">
                  <img
                    src="assets/images/step-{{ step }}.png"
                    alt="Step {{ step }}"
                    class="w-6 h-6 object-contain"
                  />
                </ng-container>
              </div>
            </div>
          </ng-container>
        </div>

        <!-- Progress line perfectly centered on icon‐row -->
        <div class="absolute inset-x-0 top-1/2 transform -translate-y-1/2">
          <div class="w-full h-px bg-gray-200"></div>
        </div>
      </div>

      <!-- Labels row (separate) -->
      <div class="grid grid-flow-col auto-cols-fr mt-3 relative z-10">
        <ng-container *ngFor="let step of steps">
          <div class="flex justify-center">
            <span
              class="text-xs font-medium transition-colors"
              [ngClass]="{
                'text-green-600': step < currentStep,
                'text-blue-600': step === currentStep,
                'text-gray-500': step > currentStep
              }"
            >
              {{ stepTitles[step] }}
            </span>
          </div>
        </ng-container>
      </div>

    </div>
  </header>

  <!-- 2. Scrollable Content Area -->
  <main class="flex-1 overflow-auto px-4 py-6 bg-white">
    <div class="wizard-container mx-auto">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- 3. Sticky Footer Controls -->
  <footer
    class="sticky bottom-0 z-10 px-4 py-4 bg-gray-100 border-t border-gray-200 flex justify-between"
  >
    <button
      (click)="back()"
      [disabled]="currentStep === steps[0]"
      class="px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 transition"
    >
      Previous
    </button>
    <button
      (click)="next()"
      [disabled]="currentStep === steps[steps.length - 1]"
      class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition"
    >
      Next
    </button>
  </footer>

</div>